/* Derived from SimSoC, Copyright Â© INRIA 2007, 2008, 2009, 2010
 * LGPL license version 3 */

/* test some functions from string.h (C library)
 * After 313 instructions executed, r0 should contain 3 */

#include <string.h>
#include "common.h"

int count = 0;

#define CHECK(OP, TEST) \
  if ((TEST)) count+=(OP);

const unsigned char key1[32] = {0xe4, 0xa8, 0x6c, 0xf0, 0xf4, 0xb8, 0x7c, 0x00,
                                0xd3, 0x97, 0x5b, 0x0f, 0xe3, 0xa7, 0x6b, 0x00,
                                0xc2, 0x86, 0x4a, 0x1e, 0xd2, 0x96, 0x5a, 0x00,
                                0xb1, 0x75, 0x39, 0x2d, 0xc1, 0x85, 0x49, 0x00};

unsigned char key2[32];

const unsigned char sixty_five[32] = {0x65, 0x65, 0x65, 0x65, 0x65, 0x65, 0x65, 0x65,
                                      0x65, 0x65, 0x65, 0x65, 0x65, 0x65, 0x65, 0x65,
                                      0x65, 0x65, 0x65, 0x65, 0x65, 0x65, 0x65, 0x65,
                                      0x65, 0x65, 0x65, 0x65, 0x65, 0x65, 0x65, 0x65};

int main() {
  memcpy(key2,key1,32);
  CHECK(1,!memcmp(key1,key2,32));
  memset(key2,0x65,32);
  CHECK(2,!memcmp(key2,sixty_five,32));
  return count;
}
